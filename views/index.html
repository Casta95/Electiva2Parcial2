<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inicio</title>
    <script src="js/scripts.js"></script>
  </head>
  <body>
    <h1>Página Principal</h1>
    <nav>
      <ul>
        <li><a href="add-dish">Agregar Plato</a></li>
        <li><a href="delete-dish">Eliminar Plato</a></li>
        <li><a href="find-dish">Busqueda por ObjectId</a></li>
      </ul>
    </nav>
    <table border="1">
      <thead>
        <th>_id</th>
        <th>id</th>
        <th>nombre</th>
        <th>calorias</th>
        <th>¿Es vegetariano?</th>
        <th>valor</th>
        <th>comentarios</th>
      </thead>
      <tbody id="tBody">
        <script>
          loadData()
            .then((result) => {
              if (result.state) {
                const tBody = document.getElementById("tBody");

                result.data.forEach((dish) => {
                  const row = document.createElement("tr");
                  const colObjectId = document.createElement("td");
                  colObjectId.appendChild(document.createTextNode(dish._id));
                  row.append(colObjectId);
                  const colId = document.createElement("td");
                  colId.appendChild(document.createTextNode(dish.idDish));
                  row.append(colId);
                  const colName = document.createElement("td");
                  colName.appendChild(document.createTextNode(dish.name));
                  row.appendChild(colName);
                  const colCalories = document.createElement("td");
                  colCalories.appendChild(document.createTextNode(dish.calories));
                  row.appendChild(colCalories);
                  const colIsVegetarian = document.createElement("td");
                  colIsVegetarian.appendChild(document.createTextNode(dish.isVegetarian));
                  row.appendChild(colIsVegetarian);
                  const colValue = document.createElement("td");
                  colValue.appendChild(document.createTextNode(dish.value));
                  row.appendChild(colValue);
                  const colComments = document.createElement("td");
                  colComments.appendChild(document.createTextNode(dish.comments));
                  row.appendChild(colComments);

                  tBody.appendChild(row);
                });
              } else {
                alert("Ho!! Algo ha salido mal");
              }
            })
            .catch((err) => console.log(err));
        </script>
      </tbody>
    </table>
  </body>
</html>
